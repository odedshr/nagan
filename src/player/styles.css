@import url('./progress-bar.css');

.mini-player {
    display: grid; 
    box-sizing: border-box;
    grid-template-columns: 1fr 1fr 1fr; 
    grid-template-rows: 1fr 5rem; 
    gap: 0px 0px; 
    grid-template-areas: 
    "cover details knobs"
    "cover controls knobs"; 
    height: 100%;
    padding: 0.5rem;
}

.track-info {
    grid-area: details; 

    background-color: #A6B28A; /* #8F9F7A;*/
    border-radius: 0.5rem;
    box-shadow: inset 0.25rem 0.25rem 0.5rem 0.25rem rgba(0, 0, 0, 0.25);
    color: #1b1b1b;
    display: flex;
    flex-direction: column;
    font-family: 'ChicagoFLF', 'ChiKareGo', monospace;
    font-size: 1.2rem;
    line-height: 1.2;
    image-rendering: pixelated;
    -webkit-font-smoothing: none;
}

.text-info {
    flex: auto;
    display: flex;
    gap: 0.5rem;
    flex-direction: column;
    padding-top: 1rem;
    text-align: center;
}

.track-title { font-weight: bold; }

.time-controls {
    display: flex;
    justify-content: space-between;
    font-size: 1.2rem;
    grid-area: time;
    margin-top: 1rem;
    margin: 1rem auto 0.5rem;
    padding: 0 0.5rem;
    width: 90%;
}

input[type="text"].position {
    background: transparent;
    border: none;
    box-shadow: none;
    padding: 0;
}

.knobs {
    gap: 1rem;
    grid-area: knobs;
    display: flex;
    align-items: center;
    justify-content: space-around;
}

.cover-container {
    display: flex;
    grid-area: cover;

    align-items: center;
    justify-content: center;

    position: relative;
}

.cover {
    border-radius: 5%;
    display: block;
    height: 10rem;
    width: 10rem;

    /* Curved glass illusion */
    transform: perspective(900px) scale(1.02);

    /* CRT softness */
    filter:
        contrast(1.1)
        saturate(1.15)
        brightness(1.05)
        blur(0.2px);
}

.cover[src=""] {
    visibility: hidden;
}

.player-controls {
    grid-area: controls;

    align-items: center;
    display: flex;
    justify-content: center;
    margin: 0;
    gap: 0.5rem
}
.player-button {
    background-color: transparent;
    background-size: 3rem 3rem;
    background-repeat: no-repeat;
    background-position: center;
    border: none;
    cursor: pointer;
    height: 4rem;
    width: 4rem;
    margin: 0 0.1rem;
    padding: 0;
    transition: filter 0.25s;
}

.player-button:not(:disabled):hover {
    background-color: var(--hover-bg-color);
}
.player-button:not(:disabled):active {
    filter: var(--active-bg-color);
}
.player-button:disabled {
    filter: opacity(0.5);
    cursor: default;
}

.player-button span { display: none; }

#loadBtn { background-image: url(../assets/btn-eject.svg); }
#previousBtn { background-image: url(../assets/btn-previous.svg); }
#playToggle { background-image: url(../assets/btn-play.svg); }
#playToggle[value="pause"] { background-image: url(../assets/btn-pause.svg); }
#nextBtn { background-image: url(../assets/btn-next.svg); }
#shuffleBtn { background-image: url(../assets/btn-shuffle.svg); }

/* #progressBar {
    -webkit-appearance: none;
    box-shadow: none;
    box-sizing: border-box;
    margin: 2rem 0.5rem;
    width: 100%;
    &:focus {
        outline: none;
    }
    &::-webkit-slider-runnable-track {
    width: 100%;
    height: 8.4px;
    cursor: pointer;
    box-shadow: 1px 1px 1px #000000, 0px 0px 1px #0d0d0d;
    background: #3071a9;
    border-radius: 1.3px;
    border: 0.2px solid #010101;
    }
    &::-webkit-slider-thumb {
    box-shadow: 1px 1px 1px #000000, 0px 0px 1px #0d0d0d;
    border: 1px solid #000000;
    height: 36px;
    width: 16px;
    border-radius: 3px;
    background: #ffffff;
    cursor: pointer;
    -webkit-appearance: none;
    margin-top: -14px;
    }
    &:focus::-webkit-slider-runnable-track {
    background: #367ebd;
    }
    &::-moz-range-track {
    width: 100%;
    height: 8.4px;
    cursor: pointer;
    box-shadow: 1px 1px 1px #000000, 0px 0px 1px #0d0d0d;
    background: #3071a9;
    border-radius: 1.3px;
    border: 0.2px solid #010101;
    }
    &::-moz-range-thumb {
    box-shadow: 1px 1px 1px #000000, 0px 0px 1px #0d0d0d;
    border: 1px solid #000000;
    height: 36px;
    width: 16px;
    border-radius: 3px;
    background: #ffffff;
    cursor: pointer;
    }
    &::-ms-track {
    width: 100%;
    height: 8.4px;
    cursor: pointer;
    background: transparent;
    border-color: transparent;
    border-width: 16px 0;
    color: transparent;
    }
    &::-ms-fill-lower {
    background: #2a6495;
    border: 0.2px solid #010101;
    border-radius: 2.6px;
    box-shadow: 1px 1px 1px #000000, 0px 0px 1px #0d0d0d;
    }
    &::-ms-fill-upper {
    background: #3071a9;
    border: 0.2px solid #010101;
    border-radius: 2.6px;
    box-shadow: 1px 1px 1px #000000, 0px 0px 1px #0d0d0d;
    }
    &::-ms-thumb {
    box-shadow: 1px 1px 1px #000000, 0px 0px 1px #0d0d0d;
    border: 1px solid #000000;
    height: 36px;
    width: 16px;
    border-radius: 3px;
    background: #ffffff;
    cursor: pointer;
    }
    &:focus::-ms-fill-lower {
    background: #3071a9;
    }

    &:focus::-ms-fill-upper {
    background: #367ebd;
    }
} */

.knob-container {
    align-items: center;
    display: inline-flex;
    flex-direction: column;
}


.knob-input {
    background-color: #333;
    box-shadow: none;
    color: red;
    font-family: "ClockDigits", "Futura", "Arial";
    font-size: 1.5rem;
    text-align: center;
    padding:0.5rem;
    margin-bottom: 1rem;
    width: 5rem;
}

.knob {
    --w: 5rem;
    --w2: 0.5rem;
    /* --posx: calc(cos(var(--angle) + 135deg ) * (var(--w) / 2.4)); */
    /* --posy: calc(sin(var(--angle) + 135deg) * (var(--w) / 2.4)); */
    --notch-offset: 180deg;
    --posx : calc(sin(-1 * var(--angle) - var(--notch-offset)) * (var(--w) * 0.4));
    --posy : calc(cos(var(--angle) + var(--notch-offset)) * (var(--w) * 0.4));
    border-radius: 50%;
    box-sizing: border-box;
    box-shadow: 0 0 0.5rem 0.2rem #000;
    cursor: grab;
    position: relative;
    height: var(--w);
    width: var(--w);

    &:not(:active) {
        &::before { transition: transform 0.25s; }
        &::after { transition: transform 0.25s; }
    }

    &::before {
        background: rgba(173, 133, 133, 0.7);
        background: repeating-conic-gradient(#888 0%, #ddd 15%, #999 33%, #eee 40%, #aaa 50%);
        border: 0.1rem solid #aaa;
        border-radius: 50%;
        box-sizing: border-box;
        content: "";
        position: absolute;
        top: calc(50% - var(--w) / 2 - var(--w2) / 4);
        left: calc(50% - var(--w) / 2 - var(--w2) / 4);
        height: var(--w);
        opacity: var(--opacityExp);
        transform: rotate(var(--angle));
        width: var(--w);
    }

    &::after {
        background: radial-gradient(closest-side, #333, rgba(0, 0, 0, 0.5));
        border: 0.2rem solid #444;
        border-radius: 50%;
        content: "";
        display: block;
        position: absolute;
        top: calc(50% - var(--w2));
        left: calc(50% - var(--w2));
        transform: translate(var(--posx), var(--posy));
        height: var(--w2);
        width: var(--w2);
    }
}

@font-face {
	font-family: 'ClockDigits';
    src: local('â˜º'), url('assets/fonts/E1234-G3KXD.ttf') format('truetype');
	font-weight: normal;
	font-style: normal;
}
